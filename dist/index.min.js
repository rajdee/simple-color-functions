"use strict";const CONSTANTS={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},limit=(r,t=0,n=255)=>Math.min(Math.max(t,r),n),xyz_rgb=r=>{const t=r>.00304?1.055*Math.pow(r,1/2.4)-.055:12.92*r;return Math.round(255*limit(t,0,1))},lab_xyz=r=>r>CONSTANTS.t1?r*r*r:CONSTANTS.t2*(r-CONSTANTS.t0),lab2rgb=({L:r,a:t,b:n})=>{let e,a,s;return a=(r+16)/116,e=isNaN(t)?a:a+t/500,s=isNaN(n)?a:a-n/200,a=CONSTANTS.Yn*lab_xyz(a),e=CONSTANTS.Xn*lab_xyz(e),s=CONSTANTS.Zn*lab_xyz(s),{r:xyz_rgb(3.2404542*e-1.5371385*a-.4985314*s),g:xyz_rgb(-.969266*e+1.8760108*a+.041556*s),b:xyz_rgb(.0556434*e-.2040259*a+1.0572252*s),a:1}},rgb_xyz=r=>(r/=255)>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,xyz_lab=r=>r>CONSTANTS.t3?Math.pow(r,1/3):r/CONSTANTS.t2+CONSTANTS.t0,rgb2xyz=({r:r,g:t,b:n})=>{return r=rgb_xyz(r),t=rgb_xyz(t),n=rgb_xyz(n),{x:xyz_lab((.4124564*r+.3575761*t+.1804375*n)/CONSTANTS.Xn),y:xyz_lab((.2126729*r+.7151522*t+.072175*n)/CONSTANTS.Yn),z:xyz_lab((.0193339*r+.119192*t+.9503041*n)/CONSTANTS.Zn)}},rgb2lab=r=>{const{x:t,y:n,z:e}=rgb2xyz(r),a=116*n-16;return{L:a<0?0:a,a:500*(t-n),b:200*(n-e)}},rgb2hex=({r:r,g:t,b:n})=>[r,t,n].reduce((r,t)=>{const n=t.toString(16);return r+=n.length>1?n:`0${n}`},"#"),luminance_c=r=>(r/=255)<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4),rgb2luminance=({r:r,g:t,b:n})=>{const e=luminance_c(r),a=luminance_c(t),s=luminance_c(n);return Math.sqrt(.299*e*e+.587*a*a+.114*s*s)},isHex=r=>/^#?([a-f\d]{1,2})([a-f\d]{1,2})([a-f\d]{1,2})$/i.test(r),isRgb=r=>{if(!r)return!1;const t=r.replace(/\s+/g,"").split(",");return 3===t.length&&t.every(r=>{const t=/^\+?(0|[1-9]\d*)$/.test(r),n=parseInt(r,10);return t&&n>=0&&n<=255})},convertFromShortNotation=r=>{if(4!==r.length)return r;return r.split("").slice(1).reduce((r,t)=>r+t+t,"#")},hex2rgb=r=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(convertFromShortNotation(r))||[];return{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),a:1}},string2rgb=r=>{const t=r.replace(/\s+/g,"").split(",").map(r=>parseInt(r,10));return{r:t[0],g:t[1],b:t[2],a:1}},parseColor=r=>r?isHex(r)?hex2rgb(r):isRgb(r)?string2rgb(r):{r:null,g:null,b:null,a:1}:{r:null,g:null,b:null,a:1},convertPercentage=r=>{if("number"==typeof r){if(Math.abs(r)<=1)return r;if(Math.abs(r)<=100)return r/100}return"string"==typeof r&&"%"===r[r.length-1]?parseFloat(r.replace("%",""))/100:0},brightness=(r,t)=>{const{L:n,a:e,b:a}=rgb2lab(r),s=limit(n*(1+convertPercentage(t)),0,100);return lab2rgb({L:s,a:e,b:a})};class Colors{constructor(r){this._rgb=parseColor(r)}rgb(){return this._rgb}css(){const{r:r,g:t,b:n,a:e}=this._rgb;return 1!==e&&e?e>0&&e<1&&`rgba(${r},${t},${n},${e})`:`rgb(${r},${t},${n})`}hex(){return rgb2hex(this._rgb)}alpha(r){return this._rgb=Object.assign(Object.assign({},this._rgb),{a:r>=0&&r<=1?r:1}),this}darken(r=1){const{L:t,a:n,b:e}=rgb2lab(this._rgb);return this._rgb=lab2rgb({L:t-CONSTANTS.Kn*r,a:n,b:e}),this}brighten(r=1){return this.darken(-r)}brightness(r){return this._rgb=brightness(this._rgb,r),this}luminance(r){return rgb2luminance(r||this._rgb)}contrast(r,t){const n=this.luminance(parseColor(r)),e=this.luminance(parseColor(t));return n>e?(n+.05)/(e+.05):(e+.05)/(n+.05)}toString(){return this.hex()}}function colors(r){return new Colors(r)}module.exports=colors;
