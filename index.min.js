"use strict";var constants={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},lab2rgb=function(r){var n,t,o,e=r.l,a=r.a,s=r.b;return t=(e+16)/116,n=isNaN(a)?t:t+a/500,o=isNaN(s)?t:t-s/200,t=constants.Yn*lab_xyz(t),n=constants.Xn*lab_xyz(n),o=constants.Zn*lab_xyz(o),{r:xyz_rgb(3.2404542*n-1.5371385*t-.4985314*o),g:xyz_rgb(-.969266*n+1.8760108*t+.041556*o),b:xyz_rgb(.0556434*n-.2040259*t+1.0572252*o)}},xyz_rgb=function(r){var n=r>.00304?1.055*Math.pow(r,1/2.4)-.055:12.92*r;return Math.round(255*Math.min(Math.max(0,n),1))},lab_xyz=function(r){return r>constants.t1?r*r*r:constants.t2*(r-constants.t0)},lab2rgb_1=lab2rgb,rgb2lab=function(r){var n=r.r,t=r.g,o=r.b,e=rgb2xyz(n,t,o),a=e.x,s=e.y,i=116*s-16;return{l:i<0?0:i,a:500*(a-s),b:200*(s-e.z)}},rgb_xyz=function(r){return(r/=255)>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92},xyz_lab=function(r){return r>constants.t3?Math.pow(r,1/3):r/constants.t2+constants.t0},rgb2xyz=function(r,n,t){return r=rgb_xyz(r),n=rgb_xyz(n),t=rgb_xyz(t),{x:xyz_lab((.4124564*r+.3575761*n+.1804375*t)/constants.Xn),y:xyz_lab((.2126729*r+.7151522*n+.072175*t)/constants.Yn),z:xyz_lab((.0193339*r+.119192*n+.9503041*t)/constants.Zn)}},rgb2lab_1=rgb2lab,isRgb=function(r){if(!r)return!1;var n=r.replace(/\s+/g,"").split(",");return 3===n.length&&n.every(function(r){var n=/^\+?(0|[1-9]\d*)$/.test(r),t=parseInt(r,10);return n&&t>=0&&t<=255})},isHex=function(r){return"#"===r[0]&&4===r.length||7===r.length},rgb2hex=function(r){return Object.keys(r).reduce(function(n,t){var o=r[t].toString(16);return n+=o.length>1?o:"0"+o},"#")},convertFromShortNotation=function(r){return 4!==r.length?r:r.split("").slice(1).reduce(function(r,n){return r+n+n},"#")},hex2rgb=function(r){if(!isHex(r))return null;var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(convertFromShortNotation(r));return{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}},rgb2luminance=function(r){var n=r.r,t=r.g,o=r.b;return.2126*luminance_c(n)+.7152*luminance_c(t)+.0722*luminance_c(o)},luminance_c=function(r){return(r/=255)<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)},rgb2luminance_1=rgb2luminance;function string2rgb(r){var n=r.replace(/\s+/g,"").split(",").map(function(r){return parseInt(r,10)});return{r:n[0],g:n[1],b:n[2]}}function parseColor(r){return r?isHex(r)?hex2rgb(r):isRgb(r)?string2rgb(r):void 0:{r:null,g:null,b:null,a:1}}var Colors=function(r){this._rgb=parseColor(r)};Colors.prototype.rgb=function(){return this._rgb},Colors.prototype.css=function(){var r=this._rgb,n=r.r,t=r.g,o=r.b,e=r.a;return 1!==e&&e?e>0&&e<1&&"rgba("+n+","+t+","+o+","+e+")":"rgb("+n+","+t+","+o+")"},Colors.prototype.hex=function(){return rgb2hex(this._rgb)},Colors.prototype.alpha=function(r){return r=parseFloat(r),this._rgb=Object.assign({},this._rgb,{a:r>=0&&r<=1?r:1}),this},Colors.prototype.darken=function(r){void 0===r&&(r=1);var n=rgb2lab_1(this._rgb),t=n.l,o=n.a,e=n.b;return this._rgb=lab2rgb_1({l:t-constants.Kn*r,a:o,b:e}),this},Colors.prototype.brighten=function(r){return void 0===r&&(r=1),this.darken(-r)},Colors.prototype.brightness=function(){var r=this._rgb,n=r.r,t=r.g,o=r.b;return Math.sqrt(.299*n*n+.587*t*t+.114*o*o)},Colors.prototype.luminance=function(r){return rgb2luminance_1(r||this._rgb)},Colors.prototype.contrast=function(r,n){var t=this.luminance(parseColor(r)),o=this.luminance(parseColor(n));return t>o?(t+.05)/(o+.05):(o+.05)/(t+.05)},Colors.prototype.toString=function(){return this.hex()};var src=function(r){return new Colors(r)};module.exports=src;
