"use strict";var constants={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},lab2rgb=function(r){var t,n,o,s=r.l,a=r.a,e=r.b;return n=(s+16)/116,t=isNaN(a)?n:n+a/500,o=isNaN(e)?n:n-e/200,n=constants.Yn*lab_xyz(n),t=constants.Xn*lab_xyz(t),o=constants.Zn*lab_xyz(o),{r:xyz_rgb(3.2404542*t-1.5371385*n-.4985314*o),g:xyz_rgb(-.969266*t+1.8760108*n+.041556*o),b:xyz_rgb(.0556434*t-.2040259*n+1.0572252*o)}},xyz_rgb=function(t){var n=t>.00304?1.055*Math.pow(t,1/2.4)-.055:12.92*r;return Math.round(255*Math.min(Math.max(0,n),1))},lab_xyz=function(r){return r>constants.t1?r*r*r:constants.t2*(r-constants.t0)},lab2rgb_1=lab2rgb,rgb2lab=function(r){var t=r.r,n=r.g,o=r.b,s=rgb2xyz(t,n,o),a=s.x,e=s.y,b=116*e-16;return{l:b<0?0:b,a:500*(a-e),b:200*(e-s.z)}},rgb_xyz=function(r){return(r/=255)>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92},xyz_lab=function(r){return r>constants.t3?Math.pow(r,1/3):r/constants.t2+constants.t0},rgb2xyz=function(r,t,n){return r=rgb_xyz(r),t=rgb_xyz(t),n=rgb_xyz(n),{x:xyz_lab((.4124564*r+.3575761*t+.1804375*n)/constants.Xn),y:xyz_lab((.2126729*r+.7151522*t+.072175*n)/constants.Yn),z:xyz_lab((.0193339*r+.119192*t+.9503041*n)/constants.Zn)}},rgb2lab_1=rgb2lab,isRgb=function(r){var t=r.replace(/\s+/g,"").split(",");return 3===t.length&&t.every(function(r){var t=/^\+?(0|[1-9]\d*)$/.test(r),n=parseInt(r,10);return t&&n>=0&&n<=255})},isHex=function(r){return"#"===r[0]&&4===r.length||7===r.length},rgb2hex=function(r){return Object.keys(r).reduce(function(t,n){return t+=r[n].toString(16)},"#")},convertFromShortNotation=function(r){return 4!==r.length?r:r.split("").slice(1).reduce(function(r,t){return r+t+t},"#")},hex2rgb=function(r){if(!isHex(r))return null;var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(convertFromShortNotation(r));return{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}};function string2rgb(r){var t=r.replace(/\s+/g,"").split(",").map(function(r){return parseInt(r,10)});return{r:t[0],g:t[1],b:t[2]}}var Colors=function(r){isHex(r)?this._rgb=hex2rgb(r):isRgb(r)&&(this._rgb=string2rgb(r))};Colors.prototype.rgb=function(){return this._rgb},Colors.prototype.css=function(){var r=this._rgb;return"rgb("+r.r+", "+r.g+", "+r.b+")"},Colors.prototype.hex=function(){return rgb2hex(this._rgb)},Colors.prototype.aplha=function(r){var t=this._rgb;return"rgba("+t.r+", "+t.g+", "+t.b+", "+r+")"},Colors.prototype.darken=function(r){void 0===r&&(r=1);var t=rgb2lab_1(this._rgb),n=t.l,o=t.a,s=t.b;return this._rgb=lab2rgb_1({l:n-constants.Kn*r,a:o,b:s}),this},Colors.prototype.brighten=function(r){return void 0===r&&(r=1),this.darken(-r)},Colors.prototype.brightness=function(){var r=this._rgb,t=r.r,n=r.g,o=r.b;return Math.sqrt(.299*t*t+.587*n*n+.114*o*o)};var src=function(r){return new Colors(r)};module.exports=src;
