"use strict";var constants={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},limit=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=255),Math.min(Math.max(t,r),n)},lab2rgb=function(r){var t,n,o,e=r.l,a=r.a,i=r.b;return n=(e+16)/116,t=isNaN(a)?n:n+a/500,o=isNaN(i)?n:n-i/200,n=constants.Yn*lab_xyz(n),t=constants.Xn*lab_xyz(t),o=constants.Zn*lab_xyz(o),{r:xyz_rgb(3.2404542*t-1.5371385*n-.4985314*o),g:xyz_rgb(-.969266*t+1.8760108*n+.041556*o),b:xyz_rgb(.0556434*t-.2040259*n+1.0572252*o)}},xyz_rgb=function(r){var t=r>.00304?1.055*Math.pow(r,1/2.4)-.055:12.92*r;return Math.round(255*limit(t,0,1))},lab_xyz=function(r){return r>constants.t1?r*r*r:constants.t2*(r-constants.t0)},lab2rgb_1=lab2rgb,rgb2lab=function(r){var t=r.r,n=r.g,o=r.b,e=rgb2xyz(t,n,o),a=e.x,i=e.y,s=116*i-16;return{l:s<0?0:s,a:500*(a-i),b:200*(i-e.z)}},rgb_xyz=function(r){return(r/=255)>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92},xyz_lab=function(r){return r>constants.t3?Math.pow(r,1/3):r/constants.t2+constants.t0},rgb2xyz=function(r,t,n){return r=rgb_xyz(r),t=rgb_xyz(t),n=rgb_xyz(n),{x:xyz_lab((.4124564*r+.3575761*t+.1804375*n)/constants.Xn),y:xyz_lab((.2126729*r+.7151522*t+.072175*n)/constants.Yn),z:xyz_lab((.0193339*r+.119192*t+.9503041*n)/constants.Zn)}},rgb2lab_1=rgb2lab,isRgb=function(r){if(!r)return!1;var t=r.replace(/\s+/g,"").split(",");return 3===t.length&&t.every(function(r){var t=/^\+?(0|[1-9]\d*)$/.test(r),n=parseInt(r,10);return t&&n>=0&&n<=255})},isHex=function(r){return"#"===r[0]&&4===r.length||7===r.length},rgb2hex=function(r){return Object.keys(r).reduce(function(t,n){var o=r[n].toString(16);return t+=o.length>1?o:"0"+o},"#")},convertFromShortNotation=function(r){return 4!==r.length?r:r.split("").slice(1).reduce(function(r,t){return r+t+t},"#")},hex2rgb=function(r){if(!isHex(r))return null;var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(convertFromShortNotation(r));return{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}},rgb2luminance=function(r){var t=r.r,n=r.g,o=r.b,e=luminance_c(t),a=luminance_c(n),i=luminance_c(o);return Math.sqrt(.299*e*e+.587*a*a+.114*i*i)},luminance_c=function(r){return(r/=255)<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)},rgb2luminance_1=rgb2luminance;function string2rgb(r){var t=r.replace(/\s+/g,"").split(",").map(function(r){return parseInt(r,10)});return{r:t[0],g:t[1],b:t[2]}}var parseColor=function(r){return r?isHex(r)?hex2rgb(r):isRgb(r)?string2rgb(r):void 0:{r:null,g:null,b:null,a:1}},convertPercentage=function(r){if("number"==typeof r){if(Math.abs(r)<=1)return r;if(Math.abs(r)<=100)return r/100}return"string"==typeof r&&"%"===r[r.length-1]?parseFloat(r.replace("%","")/100):null},brightness=function(r,t){var n=rgb2lab_1(r),o=n.l,e=n.a,a=n.b,i=limit(o*(1+convertPercentage(t)),0,100);return lab2rgb_1({l:i,a:e,b:a})},Colors=function(r){this._rgb=parseColor(r)};Colors.prototype.rgb=function(){return this._rgb},Colors.prototype.css=function(){var r=this._rgb,t=r.r,n=r.g,o=r.b,e=r.a;return 1!==e&&e?e>0&&e<1&&"rgba("+t+","+n+","+o+","+e+")":"rgb("+t+","+n+","+o+")"},Colors.prototype.hex=function(){return rgb2hex(this._rgb)},Colors.prototype.alpha=function(r){return r=parseFloat(r),this._rgb=Object.assign({},this._rgb,{a:r>=0&&r<=1?r:1}),this},Colors.prototype.darken=function(r){void 0===r&&(r=1);var t=rgb2lab_1(this._rgb),n=t.l,o=t.a,e=t.b;return this._rgb=lab2rgb_1({l:n-constants.Kn*r,a:o,b:e}),this},Colors.prototype.brighten=function(r){return void 0===r&&(r=1),this.darken(-r)},Colors.prototype.brightness=function(r){return this._rgb=brightness(this._rgb,r),this},Colors.prototype.luminance=function(r){return rgb2luminance_1(r||this._rgb)},Colors.prototype.contrast=function(r,t){var n=this.luminance(parseColor(r)),o=this.luminance(parseColor(t));return n>o?(n+.05)/(o+.05):(o+.05)/(n+.05)},Colors.prototype.toString=function(){return this.hex()};var src=function(r){return new Colors(r)};module.exports=src;
